var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Uilt;!function(e){var t=function(){function e(){}return e.debug=!0,e.gameName="极速冒险",e.StateW=640,e.StateH=1136,e.panelLineWidth=2,e.panelLineColor=65280,e.LoadGameConfigUrl="/diyGames/getConfig/",e.weixinSignUrl="/diyGames/getWXJsapiTicket",e.setting_skin=1,e.setting_grade=4,e.setting_font="微软雅黑",e.setting_rewardArr="[{num: 2048, url: 'http://www.fz222.com'}]",e}();e.Config=t,__reflect(t.prototype,"Uilt.Config");var n=function(){function e(){this.NowTimer=0,this.Timeer=10,this.Score=0}return e.prototype.getGameStatus=function(){return this.Status},e.prototype.setGameStatus=function(e){return this.Status=e},e.prototype.getNowTime=function(){return this.NowTimer},e.prototype.incNowTimeer=function(e){void 0===e&&(e=1),this.NowTimer+=e},e.prototype.getTime=function(){return this.Timeer},e.prototype.decTimeer=function(e){void 0===e&&(e=1),this.Timeer-=e},e.prototype.getScore=function(){return this.Score},e.prototype.decScore=function(e){void 0===e&&(e=1),this.Score-=e},e.prototype.incScore=function(e){void 0===e&&(e=1),this.Score+=e},e.prototype.restart=function(){this.Score=0,this.Status=c.Start,this.NowTimer=0},Object.defineProperty(e,"interval",{get:function(){return this._interval||(this._interval=new e)},enumerable:!0,configurable:!0}),e}();e.Game=n,__reflect(n.prototype,"Uilt.Game");var i=function(e){function t(){var t=e.call(this)||this;return t.x=0,t.y=0,t.width=o.stageW,t.height=o.stageH,t}return __extends(t,e),Object.defineProperty(t,"interval",{get:function(){return this._interval||(this._interval=new t)},enumerable:!0,configurable:!0}),t.prototype.loadScence=function(e){this.addChild(e)},t.prototype.removeScence=function(e){this.removeChild(e)},t}(egret.Sprite);e.SceneManager=i,__reflect(i.prototype,"Uilt.SceneManager");var r=function(){function e(){}return e.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null},e.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},e.createLineTo=function(e,n,i,r,o,a){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=t.panelLineWidth),void 0===a&&(a=t.panelLineColor);var s=new egret.Shape;return s.graphics.lineStyle(o,a),s.graphics.moveTo(e,n),s.graphics.lineTo(i,r),s.graphics.endFill(),s},e.createCurveTo=function(e,n,i,r,o,a,s,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=t.panelLineWidth),void 0===h&&(h=t.panelLineColor);var c=new egret.Shape;return c.graphics.lineStyle(s,h),c.graphics.moveTo(e,n),c.graphics.curveTo(i,r,o,a),c.graphics.endFill(),c},e.createRoundRect=function(e,t,n,i,r,o,a){void 0===a&&(a=!1);var s=new egret.Sprite;return s.x=e,s.y=t,s.graphics.beginFill(o,a?0:1),s.graphics.drawRoundRect(0,0,n,i,r,r),s.graphics.endFill(),s},e.createBtn=function(e,t,n,i,r,o,a,s,h){void 0===h&&(h=!0);var c=new egret.Sprite,l=new egret.TextField;return c.addChild(l),c.x=e,c.y=t,c.graphics.beginFill(a),c.graphics.drawRoundRect(0,0,n,i,r,r),c.graphics.endFill(),c.touchEnabled=!0,l.y=15,l.width=n,l.height=i,l.text=o,l.textAlign="center",l.textColor=s,c},e.createCircle=function(e,t,n,i){var r=new egret.Sprite;return r.graphics.beginFill(i),r.graphics.drawCircle(e,t,n),r.graphics.endFill(),r},e.createTrapezoid=function(e,t,n,i,r,o){var a=new egret.Sprite;return a.graphics.lineStyle(1,o),a.graphics.beginFill(o),a.graphics.moveTo(e-n/2,t-r),a.graphics.lineTo(e+n/2,t-r),a.graphics.lineTo(e+i/2,t),a.graphics.lineTo(e-i/2,t),a.graphics.lineTo(e-n/2,t-r),a},e.createTextField=function(){var e=new egret.TextField;return e},e}();e.Tool=r,__reflect(r.prototype,"Uilt.Tool");var o=function(){function e(){}return Object.defineProperty(e,"interval",{get:function(){return this.stage.width=t.StateW,this.stage.height=t.StateH,this._interval||(this._interval=new e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stage",{get:function(){return egret.MainContext.instance.stage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageW",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageH",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),e}();e.Stage=o,__reflect(o.prototype,"Uilt.Stage");var a=function(){function e(){}return e.init=function(){this._propertyChange=Object.create(null),this._anchorChange=Object.create(null),this.injectAnchor()},e.setAnchorX=function(e,t){e.anchorX=t},e.setAnchorY=function(e,t){e.anchorY=t},e.setAnchor=function(e,t){e.anchorX=e.anchorY=t},e.getAnchor=function(e){return e.anchorX!=e.anchorY&&console.log("target's anchorX != anchorY"),e.anchorX||0},e.getAnchorY=function(e){return e.anchorY||0},e.getAnchorX=function(e){return e.anchorX||0},e.injectAnchor=function(){Object.defineProperty(egret.DisplayObject.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){var n=this;this.$setWidth(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){var n=this;this.$setHeight(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){var n=this;this._anchorX=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){var n=this;this._anchorY=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0})},e.changeAnchor=function(e){this._propertyChange[e.hashCode]&&this._anchorChange[e.hashCode]&&(e.anchorOffsetX=e._anchorX*e.width,e.anchorOffsetY=e._anchorY*e.height,delete this._propertyChange[e.hashCode])},e}();e.AnchorUtils=a,__reflect(a.prototype,"Uilt.AnchorUtils");var s=function(){function e(){this.shareCont={}}return Object.defineProperty(e,"interval",{get:function(){return this._interval||(this._interval=new e)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,n=new egret.URLLoader,i=new egret.URLRequest(t.weixinSignUrl);n.data={url:window.location.href},n.load(i),i.method=egret.URLRequestMethod.GET,n.addEventListener(egret.Event.COMPLETE,function(t){e.signPackage=JSON.parse(t.target.data),e.getWeiXinConfig()},this)},e.prototype.getWeiXinConfig=function(){var e=new BodyConfig;e.debug=this.signPackage.debug,e.appId=this.signPackage.appId,e.timestamp=this.signPackage.timestamp,e.nonceStr=this.signPackage.nonceStr,e.signature=this.signPackage.signature,e.jsApiList=["checkJsApi","chooseImage","onMenuShareTimeline","onMenuShareAppMessage","showMenuItems","hideMenuItems"],wx.config(e),wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:timeline","menuItem:editTag","menuItem:readMode"]}),wx.checkJsApi({jsApiList:["getNetworkType","previewImage","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],success:function(e){}})})},e.prototype.onShareAPPMessage=function(){var e=new BodyMenuShareAppMessage;e.title=this.shareCont.title,e.desc=this.shareCont.desc,e.link=this.shareCont.link,e.imgUrl=this.shareCont.imgLink,e.trigger=function(e){console.log("用户点击发送给朋友")},e.success=function(e){console.log("已分享")},e.fail=function(e){console.log("已取消")},e.cancel=function(e){console.log(JSON.stringify(e))}},e.prototype.onShareQQ=function(){var e=new BodyMenuShareQQ;e.title=this.shareCont.title,e.desc=this.shareCont.desc,e.link=this.shareCont.link,e.imgUrl=this.shareCont.imgLink,e.complete=function(e){console.log(JSON.stringify(e))},e.trigger=function(e){console.log("用户点击分享到QQ")},e.success=function(e){console.log("已分享")},e.cancel=function(e){console.log("已取消")},e.fail=function(e){console.log(JSON.stringify(e))}},e.prototype.onshareWeibo=function(e){var t=new BodyMenuShareWeibo;t.title=this.shareCont.title,t.desc=this.shareCont.desc,t.link=this.shareCont.link,t.imgUrl=this.shareCont.imgLink,t.complete=function(e){console.log(JSON.stringify(e))},t.trigger=function(e){console.log("用户点击分享到微博")},t.cancel=function(e){console.log("已取消")},t.fail=function(e){console.log(JSON.stringify(e))}},e.prototype.onTimeline=function(e){var t=new BodyMenuShareTimeline;t.title=this.shareCont.title,t.link=this.shareCont.link,t.imgUrl=this.shareCont.imgLink,t.trigger=function(e){console.log("用户点击分享到朋友圈")},t.success=function(e){console.log("已分享")},t.cancel=function(e){console.log("已取消")},t.fail=function(e){console.log(JSON.stringify(e))}},e}();e.WeixinShare=s,__reflect(s.prototype,"Uilt.WeixinShare");var h=function(){function e(e,t,n,i){if(void 0===i&&(i=[]),this.request=new egret.HttpRequest,this.request.responseType=n,this.request.open(e,t),i.length>0)for(var r=0;r<i.length;r++)this.request.setRequestHeader(i[r].key,i[r].value)}return e.prototype.req=function(){return this.request},e.prototype.setHeader=function(e,t){this.request.setRequestHeader(e,t)},e.prototype.sendRequest=function(e){void 0===e&&(e=""),this.request.send(e)},e}();e.Http=h,__reflect(h.prototype,"Uilt.Http");var c;!function(e){e[e.Load=0]="Load",e[e.Start=1]="Start",e[e.Stop=2]="Stop",e[e.Died=3]="Died",e[e.Finash=4]="Finash",e[e.OneFinash=5]="OneFinash"}(c=e.GameStatus||(e.GameStatus={}));var l=function(){function e(){}return Object.defineProperty(e,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),e}();__reflect(l.prototype,"DeviceUtils")}(Uilt||(Uilt={}));var SceneCard;!function(e){var t=Uilt.Stage,n=Uilt.Tool,i=Uilt.Config,r=function(e){function t(){var t=e.call(this)||this,n=new egret.Sprite;n.x=100,n.y=640;var i=200,r=200;return n.graphics.beginFill(16711680),n.graphics.moveTo(i,r),n.graphics.lineTo(i+20,r),n.graphics.curveTo(i+100,r+100,i-20,r+300),n.graphics.lineTo(i-120,r+300),n.graphics.curveTo(i+100,r+100,i,r),n.graphics.endFill(),t.addChild(n),t}return __extends(t,e),t}(egret.Sprite);e.Road=r,__reflect(r.prototype,"SceneCard.Road");var o=function(e){function t(){var t=e.call(this)||this;return t.speed=0,t.wheelWidth=30,t.wheelHeight=60,t.wheelColor=2236962,t.wheelRound=10,t.bodyWidth=200,t.bodyLength=10,t.bodyColor=14606562,t.body=new egret.Sprite,t.init(),t}return __extends(t,e),Object.defineProperty(t,"interval",{get:function(){return this._interval||(this._interval=new t)},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.x=200,this.y=600,this.width=this.bodyWidth+50,this.height=this.bodyLength+50,this.wheels(),this.bodys(),this.tail()},t.prototype.wheels=function(){this.frontLeftWheel=n.createRoundRect(30,0,this.wheelWidth,this.wheelHeight,this.wheelRound,this.wheelColor),this.frontRightWheel=n.createRoundRect(this.bodyWidth-40,0,this.wheelWidth,this.wheelHeight,this.wheelRound,this.wheelColor),this.backLeftWheel=n.createRoundRect(0,this.bodyLength,this.wheelWidth,this.wheelHeight,this.wheelRound,this.wheelColor),this.backRightWheel=n.createRoundRect(this.bodyWidth-10,this.bodyLength,this.wheelWidth,this.wheelHeight,this.wheelRound,this.wheelColor),this.addChild(this.frontLeftWheel),this.addChild(this.frontRightWheel),this.addChild(this.backLeftWheel),this.addChild(this.backRightWheel)},t.prototype.bodys=function(){this.addChild(this.body);var e=n.createTrapezoid(this.bodyWidth/2+10,this.bodyLength,this.bodyWidth-140,this.bodyWidth,this.bodyLength+20,this.bodyColor);this.body.addChild(e);var t=n.createRoundRect(-9,this.bodyLength,this.bodyWidth+38,45,25,this.bodyColor);this.body.addChild(t);var i=n.createCircle(20,this.bodyLength+20,10,16748902),r=n.createCircle(50,this.bodyLength+20,10,16748902),o=n.createCircle(this.bodyWidth-30,this.bodyLength+20,10,16748902),a=n.createCircle(this.bodyWidth,this.bodyLength+20,10,16748902);this.body.addChild(i),this.body.addChild(r),this.body.addChild(o),this.body.addChild(a);var s=n.createTrapezoid(this.bodyWidth/2+10,this.bodyLength-5,this.bodyWidth-120,this.bodyWidth-20,this.bodyLength+10,16777215);this.body.addChild(s);var h=n.createRoundRect((this.bodyWidth-20)/2,this.bodyLength+10,40,20,10,16777215);this.body.addChild(h)},t.prototype.tail=function(){var e=n.createRoundRect(20,this.bodyLength-15,5,20,5,4671303);this.body.addChild(e);var t=n.createRoundRect(this.bodyWidth-20,this.bodyLength-15,5,20,5,4671303);this.body.addChild(t);var i=n.createRoundRect(0,this.bodyLength-15,this.bodyWidth+20,3,20,4671303);this.body.addChild(i)},t}(egret.Sprite);e.Card=o,__reflect(o.prototype,"SceneCard.Card");var a=function(e){function r(){var r=e.call(this)||this;return r.gameName=new egret.TextField,r.btnColor=14706956,r.btnRound=10,r.btnHeight=60,r.btnWidth=200,r.fontColor=16777215,r.width=t.stageW,r.height=t.stageH,r.gameName.width=400,r.gameName.height=80,r.gameName.size=80,r.gameName.text=i.gameName,r.gameName.fontFamily="楷体",r.gameName.textAlign="center",r.gameName.textColor=r.btnColor,r.gameName.x=(t.stageW-r.gameName.width)/2,r.gameName.y=300,r.addChild(r.gameName),r.btnGroup=n.createRoundRect((t.stageW-r.btnWidth)/2,500,r.btnWidth,4*(r.btnHeight+20),10,3912946,!0),r.addChild(r.btnGroup),r.startBtn=n.createBtn(0,0,r.btnWidth,r.btnHeight,r.btnRound,"开始游戏",r.btnColor,r.fontColor),r.explainBtn=n.createBtn(0,1*(r.btnHeight+20),r.btnWidth,r.btnHeight,r.btnRound,"操作介绍",r.btnColor,r.fontColor),r.settingBtn=n.createBtn(0,2*(r.btnHeight+20),r.btnWidth,r.btnHeight,r.btnRound,"游戏设置",r.btnColor,r.fontColor),r.aboutBtn=n.createBtn(0,3*(r.btnHeight+20),r.btnWidth,r.btnHeight,r.btnRound,"关于游戏",r.btnColor,r.fontColor),r.btnGroup.addChild(r.startBtn),r.btnGroup.addChild(r.explainBtn),r.btnGroup.addChild(r.settingBtn),r.btnGroup.addChild(r.aboutBtn),r.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.startBtnFunc,r),r.explainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.explainBtnFunc,r),r.settingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.settingBtnFunc,r),r.aboutBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,r.aboutBtnFunc,r),r}return __extends(r,e),r.prototype.startBtnFunc=function(){},r.prototype.explainBtnFunc=function(){},r.prototype.settingBtnFunc=function(){},r.prototype.aboutBtnFunc=function(){},r}(egret.Sprite);e.Menu=a,__reflect(a.prototype,"SceneCard.Menu")}(SceneCard||(SceneCard={}));var Load;!function(e){var t=Uilt.Http,n=Uilt.Config,i=Uilt.Tool,r=Uilt.WeixinShare,o=function(e){function t(t){void 0===t&&(t="default");var n=e.call(this)||this;return RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,n.onResCommon,n),RES.loadConfig("resource/"+t+".res.json","resource/"),n}return __extends(t,e),t.prototype.onResCommon=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onResCommon,this)},t}(egret.Sprite);e.LoadConfig=o,__reflect(o.prototype,"Load.LoadConfig");var a=function(e){function o(o){void 0===o&&(o="default");var a=e.call(this)||this;a.fileName=o;var s=i.getQueryString("id");if(RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,a.onResCommon,a),null==s)RES.loadConfig("resource/"+a.fileName+".res.json","resource/");else{var h=new t(n.LoadGameConfigUrl+s,egret.HttpMethod.GET,egret.HttpResponseType.TEXT);h.req().addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget,i=JSON.parse(t.response),o=i.setting;n.gameName=o.name||i.game_name,n.setting_skin=o.color,n.setting_grade=o.grade,n.setting_font=o.font,n.setting_rewardArr=o.reward,r.interval.init(),r.interval.shareCont.title=o.name||i.game_name,r.interval.shareCont.desc=o.share_text,r.interval.shareCont.link=window.location.href,r.interval.shareCont.imgLink=o.logo||i.game_logo,RES.loadConfig("resource/_skin"+i.setting.color+".res.json","resource/")},a),h.setHeader("Content-Type","application/x-www-form-urlencoded"),h.sendRequest()}return a}return __extends(o,e),o.prototype.onResCommon=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onResCommon,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.loadGroup("preload")},o.prototype.onGroupComplete=function(){console.log("加载完成"),SceneManager.interval.loadScence(new SceneCard.Menu)},o.prototype.onGroupProgress=function(e){console.log("progress",e.itemsLoaded,e.itemsTotal)},o}(egret.Sprite);e.LoadSkinConfig=a,__reflect(a.prototype,"Load.LoadSkinConfig")}(Load||(Load={}));var SceneManager=Uilt.SceneManager,Menu=SceneCard.Menu,Stage=Uilt.Stage,Card=SceneCard.Card,Road=SceneCard.Road,LoadSkinConfig=Load.LoadSkinConfig,Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){Stage.interval;var t=SceneManager.interval;this.stage.addChild(t);var n=(new Menu,new Card,new Road,new LoadSkinConfig("default"));t.loadScence(n)},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Scene;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Sprite);e.CoolRun=t,__reflect(t.prototype,"Scene.CoolRun")}(Scene||(Scene={}));